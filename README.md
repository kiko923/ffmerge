## 音视频合并工具（Windows）

一个基于 FFmpeg 的本地小工具，用于快速合并/封装音频与视频文件。本仓库适用于 Windows 环境，内置 `ffmpeg.exe`，可直接双击 `合并工具.exe` 使用，无需安装依赖。

### 功能特点
- **一键合并**: 将单独的音频轨与视频轨合并为一个文件（通常为 MP4/MKV）。
- **本地离线**: 所有处理在本地完成，保障隐私与安全。
- **即下即用**: 内置 `ffmpeg.exe`，无需额外安装。
- **可配置**: 通过 `ffmerge_gui_config.json` 定制默认输出路径、封装格式等。

### 适用场景
- 从网络下载得到的分离音轨（.m4a/.aac/.opus）与视频轨（.mp4/.webm/.mkv）需要合并。
- 需要无损快速封装（不重新编码，速度快，画质/音质不变）。

---

### 目录结构
```
H:\User\桌面\音视频合并
├─ ffmpeg.exe                 # FFmpeg 可执行文件（已内置）
├─ 合并工具.exe                # 图形界面（GUI）工具
└─ ffmerge_gui_config.json    # 配置文件（可选）
```

---

### 环境要求
- 操作系统: Windows 10 或更高版本（已在 Win10 测试）
- 权限: 对当前目录有读写权限

---

### 快速开始（GUI）
1. 下载或克隆本仓库到本地。
2. 双击运行 `合并工具.exe`。
3. 在界面中选择/拖拽：
   - 视频文件（如 `.mp4`/`.webm`）
   - 音频文件（如 `.m4a`/`.aac`/`.opus`）
4. 选择输出目录与目标格式（如 MP4 或 MKV）。
5. 点击开始合并，等待完成。

提示: 若仅封装（无重编码），速度应非常快；若需要跨格式封装失败，可尝试输出 `.mkv` 兼容性更好。

---

### 命令行示例（可选）
如果你偏好命令行，可直接使用内置 `ffmpeg.exe`：

```powershell
# 示例：无重编码将视频轨 video.mp4 与音频轨 audio.m4a 合并到 output.mp4
./ffmpeg.exe -i video.mp4 -i audio.m4a -c copy -map 0:v:0 -map 1:a:0 output.mp4
```

常见参数说明：
- `-c copy`: 直接拷贝码流，不重编码（最快，无损）。
- `-map`: 指定选择第几个输入的音视频轨，避免混入不需要的轨道。

---

### 配置说明（`ffmerge_gui_config.json`）
可在此文件中设置：
- 默认输出目录
- 默认封装格式（如 `mp4`/`mkv`）
- 是否优先无损封装（`-c copy`）

若你不确定如何配置，保留默认即可，GUI 会提供交互式选择。

---

### 常见问题（FAQ）
- 合并后没有声音/画面？
  - 检查 `-map` 是否正确；或使用 GUI 自动选择。
- 输出 MP4 报错但 MKV 正常？
  - 某些编码组合对 MP4 不友好，尝试输出 `mkv`。
- 合并很慢？
  - 确认是否启用了 `-c copy`（无重编码）。若需要转码会显著变慢。
- 文件名包含中文会有问题吗？
  - 通常没问题。路径尽量避免特殊符号，确保对当前目录有写权限。

---

### 贡献
目前为简易工具，欢迎提交 Issue 与 Pull Request：
- 改进 README 或添加使用示例
- 增加更多预设/配置项
- 优化 GUI 交互

---

### 免责声明
本工具仅用于合规合法场景。请确保你对处理的音视频拥有合法使用权。作者不对因使用本工具产生的任何法律或数据损失负责。

---

### 许可证
除非另有说明，本仓库以 MIT 协议开源。FFmpeg 遵循其自身许可证；`ffmpeg.exe` 的使用与再发布需遵守 FFmpeg 项目的许可条款。

---

### 致谢
- [FFmpeg 项目](https://ffmpeg.org) 提供强大的音视频处理能力。


